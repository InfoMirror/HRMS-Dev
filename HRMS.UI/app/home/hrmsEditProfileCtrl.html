<div class="container">
    <h1 class="page-title">Edit Profile</h1>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{userDetails.FirstName.value}} {{userDetails.LastName.value}}</h3>
        </div>
        <form name="editForm" role="form" novalidate>
            <div class="panel-body">
                <div class="row" ng-show="checkRole()">
                    <div class="employee-info">
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <span class="font-regular">Employee Email:</span> <span class="clr-light"><b>{{userDetails.UserEmail.value}}</b></span>
                            </div>
                            <div class="col-sm-4">
                                <span class="font-regular required">Designation:</span>
                                <select ng-model="formData.Designation.value" ng-disabled="!checkRole()" ng-required="checkRole()">
                            <option ng-repeat="designation in designations" value="{{designation.Id.value}}" ng-selected="{{formData.Designation.value==designation.Id.value}}">{{designation.Value.value}}</option>
                            </select>
                            </div>

                            <div class="col-sm-4">
                                <span class="font-regular">PF Number:</span>
                                <input type="text" id="PFNo" name="pfNo" ng-readonly="!checkRole()" ng-model="formData.PFNo.value">
                            </div>
                        </div>
                        <br>
                        <br>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <span class="font-regular required">Reporting Head:</span>
                                <select ng-model="formData.ReportingHead.value" ng-disabled="!checkRole()" ng-required="checkRole()">
                                <option ng-repeat="head in reportingHeads" value="{{head.Id.value}}" ng-selected="{{formData.ReportingHead.value==head.Id.value}}">{{head.Name.value}}</option>
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <span class="font-regular required">Team:</span>
                                <input type="text" id="Team" name="team" ng-required="checkRole()" ng-model="formData.Team.value">
                                <span ng-show="editForm.team.$error.required && editForm.team.$dirty" class="error-message">Required*</span>

                            </div>
                            <div class="col-sm-4">
                                <span class="font-regular">UAN :</span>
                                <input type="text" id="UAN" name="uan" ng-model="formData.UAN.value">
                            </div>
                        </div>
                        <br><br>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <span class="pull-left font-regular required">Date of joining:</span>
                                <olca-date id="DOJ" class="pull-left col-md-6" date-options="dateOptions" input-value="formData.DOJ.value" input-name="formData.DOJ.value"
                                    date-required="checkRole()" date-disabled="!checkRole()" show-cal="checkRole()" date-changed="checkDOJ()"></olca-date>
                                <span ng-show="editForm.doj.$error.required && editForm.doj.$dirty" class="error-message">Required*</span>
                            </div>

                            <div class="col-sm-4">
                                <span class="font-regular required"> Employee Id:</span>
                                <input type="text" id="EmpId" name="empId" ng-readonly="(!checkRole())" ng-required="checkRole()" ng-model="formData.EmpId.value">
                                <span ng-show="editForm.empId.$error.required && editForm.empId.$dirty" class="error-message">Required*</span>
                            </div>
                            <div class="col-sm-4">
                                <button type="button" class="btn btn-green" ng-click="updateEmpId()">Update Employee Id</button>
                            </div>

                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-sm-12">
                        <h4 class="clr-orange">Introduce yourself</h4>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="row" ng-show="!checkRole()">
                    <div class="employee-info">
                        <div class="col-sm-4">
                            <p> <span class="font-regular">Employee Email:</span> <span class="clr-light">{{userDetails.UserEmail.value}}</span></p>
                        </div>
                        <div class="col-sm-4">
                            <p> <span class="font-regular">Employee Unique Id:</span> <span class="clr-light">{{userDetails.EmpId.value}}</span></p>
                        </div>
                        <div class="col-sm-4">
                            <p> <span class="font-regular">Team:</span> <span class="clr-light">{{userDetails.Team.value}}</span></p>
                        </div>

                        <div class="col-sm-4">
                            <p> <span class="font-regular">Date of joining:</span> <span class="clr-light">{{userDetails.DOJ.value | date:"MMMM ','dd "}}</span></p>
                        </div>
                        <div class="col-sm-4">
                            <p> <span class="font-regular">PF Number:</span> <span class="clr-light">{{userDetails.PFNo.value}}</span></p>
                        </div>
                        <div class="col-sm-4">
                            <p><span class="font-regular">UAN:</span> <span class="clr-light">{{userDetails.UAN.value}}</span>                                </p>
                        </div>

                        <div class="col-sm-12">
                            <span class="font-regular">Designation: </span><span class="clr-light">{{employeeDesignation}}</span>
                        </div>
                        <div class="clearfix">
                            &nbsp;
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-sm-12">
                        <h4 class="clr-orange">Introduce yourself</h4>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="profile-block">
                    <!-- Tab panes -->
                    <div class="tab-content">

                        <ng-form role="tabpanel" class="tab-pane fade in active" id="PersonalDetails" name="editForm_personalDetails">
                            <div class="mt30">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="required">First Name</label>
                                                    <input type="text" class="form-control" id="FirstName" name="firstName" ng-pattern="validName" required ng-model="formData.FirstName.value">
                                                    <span ng-show="editForm_personalDetails.firstName.$error.required && editForm_personalDetails.firstName.$dirty" class="error-message">Required*</span>
                                                    <span ng-show="editForm_personalDetails.firstName.$touched && editForm_personalDetails.firstName.$error.pattern" class="error-message">Invalid First Name.</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="required">Last Name</label>
                                                    <input type="text" class="form-control" id="LastName" name="lastName" ng-pattern="validName" required ng-model="formData.LastName.value">
                                                    <span ng-show="editForm_personalDetails.lastName.$error.required && editForm_personalDetails.lastName.$dirty" class="error-message">Required*</span>
                                                    <span ng-show="editForm_personalDetails.lastName.$touched && editForm_personalDetails.lastName.$error.pattern" class="error-message">Invalid Last Name.</span>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="required">Date of Birth </label>

                                                    <olca-date id="DOB" date-options="dateOptions" name="DOB" input-value="formData.DOB.value" input-name="formData.DOB.value"
                                                        date-required="true" show-cal="true"></olca-date>
                                                    <span ng-show="editForm_personalDetails.DOB.$error.required && editForm_personalDetails.DOB.$dirty" class="error-message">Required*</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="required">Blood Group</label>
                                                    <input type="text" class="form-control" placeholder="Blood Group" id="BloodGroup" ng-pattern="validBloodGroup" name="bloodGrp"
                                                        required ng-model="formData.BloodGroup.value">
                                                    <span ng-show="editForm_personalDetails.bloodGrp.$error.required && editForm_personalDetails.bloodGrp.$dirty" class="error-message">Required*</span>
                                                    <span ng-show="editForm_personalDetails.bloodGrp.$touched && editForm_personalDetails.bloodGrp.$error.pattern" class="error-message">Invalid Blood Group.</span>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="form-group">

                                            <label class="required">Gender</label>
                                            <select class="form-control" ng-model="formData.Gender.value" required>                                               
                                                        <option ng-repeat="gender in genders" value="{{gender.Id.value}}" ng-selected="{{formData.Gender.value==gender.Id.value}}">{{gender.Value.value}}</option>
                                                    </select>
                                        </div>
                                        <a href="#FamilyDetails" role="tab" data-toggle="tab" ng-disabled="!editForm_personalDetails.$valid" class="btn btn-green">Next</a>
                                    </div>
                                    <div class="col-sm-6">&nbsp;</div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                        </ng-form>
                        <!-- Tab pane Personal Details -->

                        <ng-form role="tabpanel" class="tab-pane fade" id="FamilyDetails" name="editForm_familyDetails">
                            <h4>Family Details</h4>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="required">Marital Status</label>
                                        <select class="form-control" ng-model="formData.MaritalStatus.value" required>
                                                        <option ng-repeat="status in maritalStatus" value="{{status.Id.value}}" ng-selected="{{formData.MaritalStatus.value==status.Id.value}}">{{status.Value.value}}</option>
                                                    </select>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Nominee</label>
                                                <input type="text" class="form-control" id="Nominee" name="nominee" ng-model="formData.Nominee.value" ng-pattern="validName"
                                                    required>
                                                <span ng-show="editForm_familyDetails.nominee.$error.required && editForm_familyDetails.nominee.$dirty" class="error-message">Required*</span>
                                                <span ng-show="editForm_familyDetails.nominee.$touched && editForm_familyDetails.nominee.$error.pattern" class="error-message">Invalid Nominee.</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Relation with Nominee</label>
                                                <select class="form-control" ng-model="formData.RelationWithNominee.value" required>                                                        
                                                        <option ng-repeat="relation in relations" value="{{relation.Id.value}}" ng-selected="{{formData.RelationWithNominee.value==relation.Id.value}}">{{relation.Value.value}}</option>
                                                    </select>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label>Child 1</label>
                                                <input type="text" name="child1" class="form-control" id="Children1" ng-pattern="validName" ng-model="formData.Children1.value">
                                                <span ng-show="editForm_familyDetails.child1.$touched && editForm_familyDetails.child1.$error.pattern" class="error-message">Invalid Child Name.</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label>Child 2</label>
                                                <input type="text" name="child2" class="form-control" id="Children2" ng-model="formData.Children2.value" ng-pattern="validName">
                                                <span ng-show="editForm_familyDetails.child2.$touched && editForm_familyDetails.child2.$error.pattern" class="error-message">Invalid Child Name.</span>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <a href="#PersonalDetails" role="tab" data-toggle="tab" class="btn btn
                                                                            default">Previous
                                        </a>
                                    <a href="#ContactDetails" role="tab" data-toggle="tab" ng-disabled="!editForm_familyDetails.$valid" class="btn btn-green">Next</a>
                                </div>
                                <div class="col-sm-6">&nbsp;</div>
                                <div class="clearfix"></div>
                            </div>
                        </ng-form>
                        <!-- Tab pane Family Details -->
                        <ng-form role="tabpanel" class="tab-pane fade" id="ContactDetails" name="editForm_contactDetails">
                            <h4>Contact Details</h4>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Contact No</label>
                                                <input type="text" class="form-control" id="ContactNo" name="contactNumber" required ng-model="formData.ContactNo.value"
                                                    ng-maxlength="10" ng-minlength="10" ng-pattern="phoneNumbr">
                                                <span ng-show="editForm_contactDetails.contactNumber.$error.required && editForm_contactDetails.contactNumber.$dirty" class="error-message">Required*</span>
                                                <span ng-show="!editForm_contactDetails.contactNumber.$error.required && (editForm_contactDetails.contactNumber.$error.minlength || editForm_contactDetails.contactNumber.$error.maxlength || editForm_contactDetails.contactNumber.$error.pattern) && editForm_contactDetails.contactNumber.$dirty"
                                                    class="error-message">Invalid Contact Number</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Emergency Contact No</label>
                                                <input type="text" class="form-control" id="EmergencyContactNo" name="emergencyContactNumber" required ng-model="formData.EmergencyContactNo.value"
                                                    ng-maxlength="10" ng-minlength="10" ng-pattern="phoneNumbr">
                                                <span ng-show="editForm_contactDetails.emergencyContactNumber.$error.required && editForm_contactDetails.emergencyContactNumber.$dirty"
                                                    class="error-message">Required*</span>
                                                <span ng-show="!editForm_contactDetails.emergencyContactNumber.$error.required && (editForm_contactDetails.emergencyContactNumber.$error.minlength || editForm_contactDetails.emergencyContactNumber.$error.maxlength || editForm_contactDetails.emergencyContactNumber.$error.pattern) && editForm_contactDetails.emergencyContactNumber.$dirty"
                                                    class="error-message">Invalid Contact Number</span>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Name of Emergency Contact</label>
                                                <input type="text" class="form-control" id="NameOfEC" name="nameOfEC" ng-pattern="validName" maxlength="40" ng-model="formData.NameOfEC.value"
                                                    required>
                                                <span ng-show="editForm_contactDetails.nameOfEC.$error.required && editForm_contactDetails.nameOfEC.$dirty" class="error-message">Required*</span>
                                                <span ng-show="editForm_contactDetails.nameOfEC.$touched && editForm_contactDetails.nameOfEC.$error.pattern" class="error-message">Invalid Emergency Contact Name.</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Relation with Emergency Contact</label>
                                                <select class="form-control" ng-model="formData.RelationWithEC.value" required>
                                                <option ng-repeat="relation in relations" value="{{relation.Id.value}}" ng-selected="{{formData.RelationWithEC.value==relation.Id.value}}">{{relation.Value.value}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Personal Email</label>
                                                <input type="email" class="form-control" id="PersonalEmail" name="personalEmail" ng-model="formData.PersonalEmail.value"
                                                    ng-pattern="emailpattern" required>

                                                <span ng-show="editForm_contactDetails.personalEmail.$error.required && editForm_contactDetails.personalEmail.$dirty" class="error-message">Required*</span>

                                                <span ng-show="editForm_contactDetails.personalEmail.$touched && editForm_contactDetails.personalEmail.$error.pattern" class="error-message">Invalid Personal Email</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label>Skype ID</label>
                                                <input type="text" name="skypeID" class="form-control" id="SkypeID" name="skypeId" maxlength="30" ng-model="formData.SkypeID.value"
                                                    ng-pattern="skypeUserName">
                                                <span ng-show="editForm_contactDetails.skypeID.$touched && editForm_contactDetails.skypeID.$error.pattern" class="error-message">Invalid Skype ID</span>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="form-group">
                                        <label class="required">Current Address</label>
                                        <textarea type="textarea" class="form-control" maxlength="100" id="CurrentAddress" name="currentAddress" required ng-model="formData.CurrentAddress.value"> </textarea>
                                        <span ng-show="editForm_contactDetails.currentAddress.$error.required && editForm_contactDetails.currentAddress.$dirty" class="error-message">Required*</span>
                                    </div>
                                    <div class="form-group">
                                        <label class="required">Permanent Address</label>
                                        <textarea type="textarea" class="form-control" id="PermanentAddress" maxlength="100" name="permanentAddress" required ng-model="formData.PermanentAddress.value"></textarea>
                                        <span ng-show="editForm_contactDetails.permanentAddress.$error.required && editForm_contactDetails.permanentAddress.$dirty"
                                            class="error-message">Required*</span>
                                    </div>
                                    <a href="#FamilyDetails" role="tab" data-toggle="tab" class="btn btn-default">Previous</a>
                                    <a href="#OtherInfo" role="tab" data-toggle="tab" ng-disabled="!editForm_contactDetails.$valid" class="btn btn-green">Next</a>
                                </div>
                                <div class="col-sm-6">&nbsp;</div>
                                <div class="clearfix"></div>
                            </div>
                        </ng-form>
                        <!-- Tab pane Contact Details -->

                        <div role="tabpanel" class="tab-pane fade" id="OtherInfo">
                            <h4>Other Info</h4>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">PAN Number</label>
                                                <input type="text" class="form-control" id="PanCard" name="panNo" ng-pattern="validAlphaNum" ng-model="formData.PanCard.value"
                                                    required>
                                                <span ng-show="editForm.panNo.$error.required && editForm.panNo.$dirty" class="error-message">Required*</span>
                                                <span ng-show="editForm.panNo.$touched && editForm.panNo.$error.pattern" class="error-message">Invalid PAN Number</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label>Bank Account Number</label>
                                                <input type="text" class="form-control" id="BankAccountNumber" name="bankAccNum" ng-model="formData.BankAccountNumber.value"
                                                    ng-minlength="11" ng-maxlength="15" ng-pattern="onlyNumbers">
                                                <span ng-show="editForm.bankAccNum.$touched && editForm.bankAccNum.$error.pattern" class="error-message">Invalid Bank Account Number</span>
                                                <span style="color:red" ng-show="editForm.bankAccNum.$error.minlength" class="error-message">Your Bank Account Number Should Contain Atleast 11 Characters</span>
                                                <span style="color:red" ng-show="editForm.bankAccNum.$error.maxlength" class="error-message">Sorry You are Exceeding the Limit</span>
                                                <!--<span ng-show="editForm.bankAccNum.$error.required && editForm.bankAccNum.$dirty" class="error-message">Required*</span>-->
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="passport" class="mr5">Do you own Passport</label>
                                <input type="checkbox" name="passport" id="passport" ng-model="formData.ownPassport.value">
                                <div class="reveal-if-active">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Passport No</label>
                                                <input type="text" class="form-control" id="PassportNumber" name="passportNo" ng-model="formData.PassportNumber.value" ng-required="formData.ownPassport.value">
                                                <span ng-show="editForm.passportNo.$error.required && editForm.passportNo.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Passport Issue Place</label>
                                                <input type="text" class="form-control" id="PassportIssuePlace" name="passportIssuePlace" ng-model="formData.PassportIssuePlace.value"
                                                    ng-required="formData.ownPassport.value">
                                                <span ng-show="editForm.passportIssuePlace.$error.required && editForm.passportIssuePlace.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Passport Issue Date</label>
                                                <olca-date class="form-control" date-options="dateOptions" input-value="formData.PassportIssueDate.value" input-name="formData.PassportIssueDate.value"
                                                    date-required="formData.ownPassport.value" ng-click="startDateCalOpen($event)"
                                                    show-cal="true"></olca-date>

                                                <span ng-show="editForm.passportIssueDate.$error.required && editForm.passportIssueDate.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Passport Expiry Date</label>
                                                <olca-date min-date="ToMin" class="form-control" date-options="dateOptions" input-value="formData.PassportExpiryDate.value"
                                                    input-name="formData.PassportExpiryDate.value" date-required="
                                                    formData.ownPassport.value" ng-click="endDateCalOpen($event)" show-cal="true"></olca-date> 
                                                <span ng-show="editForm.passportExpiryDate.$error.required && editForm.passportExpiryDate.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="visa" class="mr5">Do you own Visa Status</label>
                                <input type="checkbox" name="visa" id="visa" ng-model="formData.ownVisa.value">
                                <div class="reveal-if-active">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Visa Country</label>
                                                <select class="form-control" name="visaCountry" ng-required="formData.ownVisa.value" ng-model="formData.visaCountry.value"
                                                    visibility="false">
                                                    <option value="USA">USA</option>
                                                    <option value="France">France</option>
                                                    <option value="Thailand">Thailand</option>
                                                    </select>
                                                <span ng-show="editForm.visaCountry.$error.required && editForm.visaCountry.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="required">Visa Expiry Date</label>
                                                <olca-date min-date="startMin" date-options="dateOptions" date-required="formData.ownVisa.value" input-value="formData.visaExpiryDate.value"
                                                    input-name="formData.visaExpiryDate.value" show-cal="true"></olca-date>
                                                <span ng-show="editForm.visaExpiryDate.$error.required && editForm.visaExpiryDate.$dirty" class="error-message">Required*</span>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" ng-show="checkRole()">
                                <label class="mr5" for="hrAccess">HR Access:</label>
                                <input type="checkbox" ng-model="formData.hrAccess">
                            </div>

                            <div class="form-group" ng-show="checkRole()">
                                <label class="mr5" for="IsActive">IsActive:</label>
                                <input type="checkbox" ng-model="formData.IsActive.value">
                                <label class="mr5">(Uncheck this checkbox to deactivate the Employee)</label>
                            </div>

                            <div class="tooltip-wrapper" title="{{(!editForm.$valid?'Please fill all the required fields' : '')}}">
                                <a href="#ContactDetails" role="tab" data-toggle="tab" class="btn btn-default">Back</a>
                                <button type="submit" class="btn btn-green" ng-click="submit()" ng-disabled="!editForm.$valid" ng-show="!checkRole()">Save</button>

                                <button type="submit" class="btn btn-green" ng-click="submit()" ng-disabled="!editForm.$valid" ng-show="checkRole()">Approve & Save</button>
                            </div>
                        </div>
                        <div class="col-sm-6">&nbsp;</div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <!-- Tab pane Other Info -->
            </div>
    </div>
</div>
</form>
</div>
</div>